(this["webpackJsonppixelise-svg"]=this["webpackJsonppixelise-svg"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(9),r=n.n(s),o=(n(15),n(3)),l=n(4),c=n(6),h=n(5),p=n(1),u=n(7),d=(n(16),n(2)),g=(n(18),"M553.44,72.65q-3.29,33.3-4.38,60t-1.12,55.85v1.79q0,6-5.5,5.95T537,190.3v-1.79Q537,98.79,482,64.05t-179-34.77q-91.23,0-139.52,20.5t-48.3,58.51q0,20.82,19.75,37.74t62.61,32.38q20.83,7.14,49.42,14.87t94.47,22.58q65.89,14.83,96.62,23.77T492,257.44q40.62,15.45,59.83,34.17T571,332.9q0,49.34-68.64,81.7T331.61,447q-73.61,0-128-3.58T75.68,429.16c-4.38-.39-7.33-1-8.76-1.77a4.29,4.29,0,0,1-2.19-4.16V349.54q-1.14-39.21-1.12-55V271.11q0-5.92,6-5.93t6,5.93q0,86.77,62.61,128.36t193.32,41.58q83.39,0,128.47-20.79t45.05-59.43q0-20.77-19.26-38T426,290.71q-19.77-7.11-47.23-14.55t-95.55-22.87Q218.44,239,186.06,230.12t-56.53-17.84q-42.84-16-63.19-34.74t-20.29-41.3q0-49.93,73-81.41t184-31.5q60.33,0,112.57,3.26T542.44,38.78c5.14.8,8.23,1.6,9.34,2.37a8.51,8.51,0,0,1,2.73,4.16v7.13C554.51,55.63,554.15,62.35,553.44,72.65Z"),v=n(19),m=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={inputPaths:[g],outputPolygons:[]},e.c=null,e.cg=null,e.outputDrawing=i.a.createRef(),e.componentDidMount=e.componentDidMount.bind(Object(p.a)(e)),e.drawResult=e.drawResult.bind(Object(p.a)(e)),e.processPath=e.processPath.bind(Object(p.a)(e)),e.drawGrid=e.drawGrid.bind(Object(p.a)(e)),e.handleDrop=e.handleDrop.bind(Object(p.a)(e)),e.handleDragOver=e.handleDragOver.bind(Object(p.a)(e)),e.handleDragExit=e.handleDragExit.bind(Object(p.a)(e)),e.updateBlob=e.updateBlob.bind(Object(p.a)(e)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.c=Object(d.g)().addTo("#workDrawing"),this.cg=Object(d.g)().addTo("#drawing").size(this.props.width,this.props.height).attr("class","grid"),this.drawGrid(),this.drawResult(),this.updateBlob()}},{key:"componentDidUpdate",value:function(e){this.drawGrid(),v(this.props,e)||(this.drawResult(),this.updateBlob())}},{key:"handleDragOver",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({isDragOver:!0})}},{key:"handleDragExit",value:function(e){e.stopPropagation(),e.preventDefault(),this.setState({isDragOver:!1})}},{key:"handleDragEnter",value:function(e){e.stopPropagation()}},{key:"parseSVG",value:function(e){var t=Object(d.g)(e).find("path"),n=[];console.log("".concat(t.length," path elements found."));for(var a=0;a<t.length;a++){var i=t[a];n.push(i.node.attributes.d.nodeValue)}this.setState({inputPaths:n})}},{key:"handleDrop",value:function(e){var t=this;if(e.stopPropagation(),e.preventDefault(),this.setState({isDragOver:!1}),e.dataTransfer.items&&"file"===e.dataTransfer.items[0].kind){var n=e.dataTransfer.items[0].getAsFile();"image/svg+xml"===n.type&&n.text().then((function(e){t.parseSVG(e)}))}}},{key:"drawGrid",value:function(){if(this.cg.clear(),this.props.enableGrid){for(var e=0;e<this.props.resY;e++){var t=this.props.height/this.props.resY*e;this.cg.polygon([[0,t],[this.props.width,t]])}for(var n=0;n<this.props.resX;n++){var a=this.props.width/this.props.resX*n;this.cg.polygon([[a,0],[a,this.props.height]])}}}},{key:"processPath",value:function(e){for(var t=this.c.path(e).toPoly(this.props.samples)._array,n=[],a=[],i=0;i<t.length;i++){var s=t[i],r=this.props.width/this.props.resX,o=this.props.height/this.props.resY,l=Math.round(s[0]/r)*r,c=Math.round(s[1]/o)*o;n.push([l,c])}a.push(n[0]);for(var h=[],p=1;p<n.length;p++){var u=n[p],d=n[p-1];if(u[0]!==d[0]&&u[1]!==d[1]){var g=[u[0],d[1]];a.push(g),h.push(g.join(","))}u[0]===d[0]&&u[1]===d[1]||(a.push(u),h.push(u.join(",")))}return h}},{key:"updateBlob",value:function(){var e='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="1300" height="660">'+this.outputDrawing.current.innerHTML+"</svg>",t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});this.props.handleSVGBlob(t)}},{key:"drawResult",value:function(){this.c.clear();for(var e=[],t=0;t<this.state.inputPaths.length;t++)e.push(this.processPath(this.state.inputPaths[t]));this.setState({outputPolygons:e})}},{key:"render",value:function(){var e=this.state.outputPolygons.map((function(e,t){return i.a.createElement("polygon",{key:t,style:{stroke:"black"},className:"result",points:e.join(" ")})}));return i.a.createElement("div",{"data-dragover":this.state.isDragOver,onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragExit:this.handleDragExit,onDragEnter:this.handleDragEnter,className:"drawing",id:"drawing"},i.a.createElement("svg",{className:"outputDrawing",ref:this.outputDrawing,width:this.props.width,height:this.props.height},e),i.a.createElement("div",{className:"workDrawing",id:"workDrawing"}),i.a.createElement("div",{className:"drag-overlay"},i.a.createElement("h2",null,"Drop files anywhere to process")))}}]),t}(i.a.Component),b=(n(20),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"setting slider"},i.a.createElement("div",{className:"slider-value"},i.a.createElement("input",{className:"value-input",onChange:this.props.changeHandler,name:this.props.id,type:"number",min:this.props.min,max:this.props.max,step:this.props.step,value:this.props.value})),i.a.createElement("label",{htmlFor:this.props.id},this.props.title),i.a.createElement("input",{className:"slider-input",onChange:this.props.changeHandler,name:this.props.id,type:"range",min:this.props.min,max:this.props.max,step:this.props.step,value:this.props.value}))}}]),t}(i.a.Component)),f=(n(21),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"setting"},i.a.createElement("label",{htmlFor:this.props.id},this.props.title),i.a.createElement("input",{onChange:this.props.changeHandler,name:this.props.id,type:"checkbox",checked:this.props.value}))}}]),t}(i.a.Component)),w=(n(22),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).handleChange=e.handleChange.bind(Object(p.a)(e)),e.resultToFile=e.resultToFile.bind(Object(p.a)(e)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target.getAttribute("name"),n="checkbox"===e.target.type?e.target.checked:e.target.value;this.props.updateSetting(t,n)}},{key:"resultToFile",value:function(){var e=URL.createObjectURL(this.props.svgBlob),t=document.createElement("a");t.href=e,t.download="newesttree.svg",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"render",value:function(){return i.a.createElement("div",{className:"settings"},i.a.createElement("h2",null,"Pixelise SVG"),i.a.createElement(b,{changeHandler:this.handleChange,value:this.props.settings.resX,title:"Resolution X",id:"resX",min:"1",max:"300",step:"1"}),i.a.createElement(b,{changeHandler:this.handleChange,value:this.props.settings.resY,title:"Resolution Y",id:"resY",min:"1",max:"300",step:"1"}),i.a.createElement(b,{changeHandler:this.handleChange,value:this.props.settings.samples,title:"Samples",id:"samples",min:"10",max:"300",step:"1"}),i.a.createElement(f,{value:this.props.settings.enableGrid,id:"enableGrid",changeHandler:this.handleChange,title:"Enable Grid"}),i.a.createElement("a",{href:"#1",className:"btn",onClick:this.resultToFile},"Download SVG"))}}]),t}(i.a.Component)),y=(n(23),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={width:0,height:0,svgBlob:"",settings:{resX:145,resY:160,samples:100,enableGrid:!0}},e.updateWindowDimensions=e.updateWindowDimensions.bind(Object(p.a)(e)),e.updateSetting=e.updateSetting.bind(Object(p.a)(e)),e.handleSVGBlob=e.handleSVGBlob.bind(Object(p.a)(e)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"handleSVGBlob",value:function(e){this.setState({svgBlob:e})}},{key:"updateSetting",value:function(e,t){console.log("Updating setting ".concat(e," to ").concat(t)),this.setState((function(n){return null!==n.settings[e]?n.settings[e]=t:console.error("Attempted to update non-existing setting ".concat(e)),n}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"app"},i.a.createElement("main",{className:"app-wrap"},i.a.createElement(m,{handleSVGBlob:this.handleSVGBlob,width:"1850",height:"1100",samples:this.state.settings.samples,resX:this.state.settings.resX,resY:this.state.settings.resY,enableGrid:this.state.settings.enableGrid}),i.a.createElement(w,{svgBlob:this.state.svgBlob,updateSetting:this.updateSetting,settings:this.state.settings})))}}]),t}(i.a.Component)),O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(i.a.createElement(y,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pixelise-svg",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pixelise-svg","/service-worker.js");O?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):j(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):j(t,e)}))}}()}],[[10,1,2]]]);
//# sourceMappingURL=main.5be8c858.chunk.js.map